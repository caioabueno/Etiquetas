<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etiqueta de Carregamento (Palete)</title>
    <link rel="stylesheet" href="styles_carregamento.css" />
    <!-- <style>
        /* --- ESTILOS GERAIS --- */
        body { font-family: sans-serif; display: flex; gap: 20px; padding: 20px; background: #f0f0f0; height: 100vh; margin: 0; box-sizing: border-box;}
        
        /* PAINEL DE CONTROLE */
        .controls { 
            background: white; padding: 20px; border-radius: 8px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
            width: 320px; min-width: 320px; flex-shrink: 0; height: fit-content; 
        }
        .controls h2 { margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        .input-row { display: flex; gap: 10px; margin-bottom: 15px; }
        .input-group { flex: 1; }
        .input-group.large { flex: 2; }
        
        .input-group label { display: block; font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; }
        .input-group input { width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; font-size: 1rem; }
        
        button { 
            border: none; padding: 12px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; margin-bottom: 5px; color: white;
        }
        .btn-add { background: #28a745; }
        .btn-add:hover { background: #218838; }
        
        .btn-print { background: #007bff; margin-top: 20px;}
        .btn-print:hover { background: #0056b3; }
        
        .btn-clear { background: #dc3545; margin-top: 5px; }
        .btn-clear:hover { background: #c82333; }

        /* LISTA DE PEDIDOS NO PAINEL (Feedback Visual) */
        .mini-list { margin-top: 20px; border-top: 1px solid #eee; padding-top: 10px; max-height: 200px; overflow-y: auto; }
        .mini-item { display: flex; justify-content: space-between; font-size: 0.9rem; padding: 5px 0; border-bottom: 1px dashed #eee; }
        .mini-item button { width: auto; padding: 2px 6px; font-size: 0.7rem; margin: 0; background: #999; }

        /* --- PREVIEW E IMPRESS√ÉO (A4 PAISAGEM) --- */
        .preview-area { 
            flex-grow: 1; background: #ccc; 
            display: flex; justify-content: center; align-items: flex-start; 
            overflow: auto; padding: 20px;
        }

        .etiqueta {
            background: white;
            width: 29.7cm; height: 21cm;
            padding: 15mm;
            box-sizing: border-box;
            display: flex; flex-direction: column;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            
            /* Zoom para caber na tela */
            transform: scale(0.65); transform-origin: top center;
        }

        /* LAYOUT DA ETIQUETA */
        .header { 
            text-align: center; border-bottom: 3px solid #000; 
            padding-bottom: 10px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center;
        }
        .header img { height: 60px; margin-right: 20px; }
        .header h1 { margin: 0; font-size: 2rem; text-transform: uppercase; }

        /* CONTAINER DA LISTA (Onde a m√°gica do resize acontece) */
        .lista-container {
            flex-grow: 1; /* Ocupa todo o espa√ßo dispon√≠vel */
            border: 2px solid #000;
            padding: 10px;
            overflow: hidden; /* Esconde se vazar (o JS vai impedir que vaze) */
            display: flex;
            flex-direction: column;
        }

        /* A TABELA DE PEDIDOS NA ETIQUETA */
        .pedidos-table { width: 100%; border-collapse: collapse; }
        .pedidos-table th { text-align: left; border-bottom: 2px solid #000; font-size: 1.5rem; }
        .pedidos-table td { border-bottom: 1px solid #ccc; padding: 5px 0; }
        
        /* Classes de fonte que ser√£o ajustadas pelo JS */
        .row-cliente { font-weight: bold; font-size: 3rem; text-transform: uppercase; }
        .row-vol { font-weight: bold; font-size: 3rem; text-align: right; }

        /* RODAP√â TOTALIZADOR */
        .footer { 
            margin-top: 10px; border-top: 3px solid #000; padding-top: 10px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .total-box { font-size: 1.5rem; font-weight: bold; text-transform: uppercase; }
        .total-number { font-size: 3rem; font-weight: 900; margin-left: 10px; }

        /* --- IMPRESS√ÉO --- */
        @media print {
            body { background: white; margin: 0; padding: 0; height: 100vh; width: 100vw; overflow: hidden; }
            .controls, .preview-area { display: none; } /* Esconde painel e container cinza */
            
            .preview-area { display: block !important; padding: 0; margin: 0; } /* Mostra s√≥ o wrapper */
            
            .etiqueta {
                position: fixed; top: 0; left: 0; margin: 0;
                transform: none; box-shadow: none; border: none;
                width: 29.7cm; height: 21cm;
            }
        }
    </style> -->
</head>
<body>

    <div class="controls">
        <h2>Montagem de Palete</h2>
        
        <div class="input-row">
            <div class="input-group large">
                <label>Cliente / Pedido</label>
                <input type="text" id="inCliente" placeholder="Ex: Supermercado X" onkeypress="handleEnter(event)">
            </div>
            <div class="input-group">
                <label>Volumes</label>
                <input type="number" id="inQtd" placeholder="Qtd" onkeypress="handleEnter(event)">
            </div>
        </div>

        <button class="btn-add" onclick="adicionarPedido()">‚ûï ADICIONAR PEDIDO</button>
        
        <div class="mini-list" id="miniList">
            </div>

        <button class="btn-print" onclick="window.print()">üñ®Ô∏è IMPRIMIR PALETE</button>
        <button class="btn-clear" onclick="limparTudo()">üóëÔ∏è NOVO PALETE (LIMPAR)</button>
    </div>

    <div class="preview-area">
        <div class="etiqueta" id="etiquetaA4">
            
            <div class="header">
                <img src="../Recebimento/logo.png" alt="Logo">
                <h1>Identifica√ß√£o de Carga</h1>
            </div>

            <div class="lista-container" id="listaContainer">
                <table class="pedidos-table" id="tabelaPedidos">
                    <thead>
                        <tr>
                            <th style="width: 80%">CLIENTE</th>
                            <th style="width: 20%; text-align: right;">VOL</th>
                        </tr>
                    </thead>
                    <tbody id="tabelaBody">
                        </tbody>
                </table>
            </div>

            <div class="footer">
                <div class="total-box">Data: <span id="dataHoje"></span></div>
                <div class="total-box">
                    TOTAL VOLUMES: <span class="total-number" id="totalVol">0</span>
                </div>
            </div>

        </div>
    </div>
    <script src="script.js"></script>

    <!-- <script>
        let pedidos = [];

        // Inicializa data
        const hoje = new Date();
        document.getElementById('dataHoje').innerText = `${hoje.getDate()}/${hoje.getMonth()+1}/${hoje.getFullYear()}`;

        function handleEnter(e) {
            if (e.key === 'Enter') adicionarPedido();
        }

        function adicionarPedido() {
            const cliente = document.getElementById('inCliente').value.toUpperCase();
            const qtd = parseInt(document.getElementById('inQtd').value);

            if (!cliente || !qtd) {
                alert("Preencha o cliente e a quantidade!");
                return;
            }

            // Adiciona ao array
            pedidos.push({ cliente, qtd });

            // Limpa inputs e foca no cliente para o pr√≥ximo
            document.getElementById('inCliente').value = "";
            document.getElementById('inQtd').value = "";
            document.getElementById('inCliente').focus();

            renderizar();
        }

        function renderizar() {
            const tbody = document.getElementById('tabelaBody');
            const miniList = document.getElementById('miniList');
            const totalEl = document.getElementById('totalVol');
            
            tbody.innerHTML = "";
            miniList.innerHTML = "";
            let total = 0;

            // Renderiza na Etiqueta (Tabela)
            pedidos.forEach((p, index) => {
                total += p.qtd;
                
                // Linha na Etiqueta
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="row-cliente">${p.cliente}</td>
                    <td class="row-vol">${p.qtd}</td>
                `;
                tbody.appendChild(tr);

                // Linha no Painel (Mini lista com bot√£o de remover)
                const miniItem = document.createElement('div');
                miniItem.className = 'mini-item';
                miniItem.innerHTML = `
                    <span>${p.cliente} (${p.qtd})</span>
                    <button onclick="removerPedido(${index})">X</button>
                `;
                miniList.appendChild(miniItem);
            });

            totalEl.innerText = total;

            // --- L√ìGICA DE AUTO-RESIZE ---
            ajustarFonte();
        }

        function removerPedido(index) {
            pedidos.splice(index, 1);
            renderizar();
        }

        function limparTudo() {
            if(confirm("Tem certeza que quer limpar toda a lista?")) {
                pedidos = [];
                renderizar();
            }
        }

        // Fun√ß√£o M√°gica: Ajusta o tamanho da fonte para caber no container
        function ajustarFonte() {
            const container = document.getElementById('listaContainer');
            const table = document.getElementById('tabelaPedidos');
            const linhasCliente = document.querySelectorAll('.row-cliente');
            const linhasVol = document.querySelectorAll('.row-vol');
            
            // 1. Reseta para um tamanho grande inicial
            let fontSize = 4.0; // Come√ßa com 4rem
            aplicarFonte(fontSize);

            // 2. Enquanto a tabela for maior que o container, diminui a fonte
            // container.clientHeight = altura dispon√≠vel
            // table.scrollHeight = altura que o conte√∫do quer ocupar
            while (table.scrollHeight > container.clientHeight && fontSize > 0.5) {
                fontSize -= 0.1; // Diminui de 0.1 em 0.1
                aplicarFonte(fontSize);
            }
        }

        function aplicarFonte(size) {
            const linhasCliente = document.querySelectorAll('.row-cliente');
            const linhasVol = document.querySelectorAll('.row-vol');
            
            linhasCliente.forEach(el => el.style.fontSize = size + "rem");
            linhasVol.forEach(el => el.style.fontSize = size + "rem");
        }
    </script> -->
</body>
</html>